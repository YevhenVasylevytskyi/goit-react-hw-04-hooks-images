(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__BRgxo",Modal:"Modal_Modal__3A6Gn"}},12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__11GeK","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__36VXo"}},14:function(e,t,a){e.exports={container:"Container_container__1OHze"}},15:function(e,t,a){e.exports={Button:"Button_Button__bJwc8"}},19:function(e,t,a){e.exports={Loader:"Loader_Loader__2bldp"}},20:function(e,t,a){e.exports={Message:"SerchError_Message__FxmQ4"}},21:function(e,t,a){e.exports={App:"App_App__1aX6o"}},23:function(e,t,a){},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__uNk5F",SearchForm:"Searchbar_SearchForm__2fPbt",SearchForm_button:"Searchbar_SearchForm_button__1ISA8",SearchForm_button_label:"Searchbar_SearchForm_button_label__3Pkl3",SearchForm_input:"Searchbar_SearchForm_input__3cMEj"}},50:function(e,t,a){"use strict";a.r(t);a(23);var r=a(0),n=a.n(r),c=a(4),o=a.n(c),s=a(3),i=a(14),l=a.n(i),u=a(1);function m(e){var t=e.children;return Object(u.jsx)("div",{className:l.a.container,children:t})}var h=a(22),d=a(7),j=a(5),b=a.n(j);function g(e){var t=e.searchPictures,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(u.jsx)("header",{className:b.a.Searchbar,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),d.b.success("\u041f\u0440\u0438\u044f\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"),o("")):d.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438")},children:Object(u.jsxs)("form",{className:b.a.SearchForm,children:[Object(u.jsx)("button",{type:"submit",className:b.a.SearchForm_button,children:Object(u.jsxs)("span",{className:b.a.SearchForm_button_label,children:[Object(u.jsx)(h.a,{}),"Search"]})}),Object(u.jsx)("input",{className:b.a.SearchForm_input,name:"inputValue",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value.trim().toLocaleLowerCase())}})]})})}var p=a(13),f=a(11),O=a.n(f),_=document.querySelector("#modal-root");function x(e){var t=e.onCloseModal,a=e.modalImage,n=e.modalAlt,o=e.children;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e,!1)}}),[t]),Object(c.createPortal)(Object(u.jsx)("div",{className:O.a.Overlay,onClick:t,children:Object(u.jsxs)("div",{className:O.a.Modal,children:[o,Object(u.jsx)("img",{src:a,alt:n})]})}),_)}var v=a(2),y=a.n(v),S=a(12),I=a.n(S);function F(e){var t=e.cards,a=Object(r.useState)(!1),n=Object(s.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(""),l=Object(s.a)(i,2),m=l[0],h=l[1],d=Object(r.useState)(""),j=Object(s.a)(d,2),b=j[0],g=j[1],p=function(e){o(!0),h(e.target.dataset.source),g(e.target.attributes.alt.textContent)};return Object(u.jsxs)(u.Fragment,{children:[t.map((function(e){return Object(u.jsx)("li",{className:I.a.ImageGalleryItem,children:Object(u.jsx)("div",{children:Object(u.jsx)("img",{onClick:p,src:e.webformatURL,className:I.a.ImageGalleryItemImage,alt:e.id,"data-source":e.largeImageURL})})},e.id)})),c&&Object(u.jsx)(x,{onCloseModal:function(e){"IMG"!==e.target.nodeName&&(o(!1),h(""),g(""))},modalImage:m,modalAlt:b})]})}F.protoType={cards:y.a.array};var k=a(15),N=a.n(k);function w(e){var t=e.loadMore;return Object(u.jsx)("button",{type:"submit",onClick:function(){return t()},className:N.a.Button,children:"Load more"})}var G=a(16),M=a(17),C=function(){function e(){Object(G.a)(this,e),this.page=1,this.searchQuery="",this.total=0,this.amount=0}return Object(M.a)(e,[{key:"getImages",value:function(){var e=this,t="23013902-f53df9bcd1cd3c8e660b93280",a="".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&key=").concat(t);return fetch(a).then((function(e){if(e.ok)return e.json()})).then((function(t){return e.page+=1,e.total=t.totalHits,e.amount+=t.hits.length,t})).catch((function(e){return console.warn(e)}))}},{key:"resetPage",value:function(){this.page=1}},{key:"resetAmount",value:function(){this.amount=0}},{key:"value",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}(),L=a(18),A=a.n(L),E=a(19),P=a.n(E);function Q(){return Object(u.jsx)("div",{className:P.a.Loader,children:Object(u.jsx)(A.a,{type:"Circles",color:"#00BFFF",height:80,width:80})})}var B=a(20),T=a.n(B);function H(e){var t=e.message;return Object(u.jsxs)("span",{className:T.a.Message,children:[' Search images "',t,'" not found ']})}H.protoType={message:y.a.string};var q=a(9),J=a.n(q),R=new C;function z(e){var t=e.searchQuery,a=Object(r.useState)([]),n=Object(s.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)("idle"),l=Object(s.a)(i,2),m=l[0],h=l[1];Object(r.useEffect)((function(){""!==t&&(h("pending"),R.value=t,R.resetPage(),R.getImages().then((function(e){return 0!==e.hits.length?(o(e.hits),void h("resolved")):(o(e.hits),h("rejected"),e)})).catch((function(e){return console.warn(e)})))}),[t]);return"idle"===m?Object(u.jsx)("div",{className:J.a.Idle,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0438\u0441\u043a\u0430."}):"pending"===m?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:J.a.ImageGallery,children:Object(u.jsx)(F,{cards:c})}),Object(u.jsx)(Q,{}),";"]}):"rejected"===m?Object(u.jsx)(H,{message:t}):"resolved"===m?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:J.a.ImageGallery,children:Object(u.jsx)(F,{cards:c})}),Object(u.jsx)(w,{loadMore:function(){h("pending"),R.getImages().then((function(e){return o([].concat(Object(p.a)(c),Object(p.a)(e.hits))),h("resolved"),e})).catch((function(e){return console.warn(e)})).finally((function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),100)}))}})]}):void 0}z.protoType={searchQuery:y.a.string};a(49);function U(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(u.jsxs)(m,{children:[Object(u.jsx)(g,{searchPictures:function(e){n(e)}}),Object(u.jsx)(z,{searchQuery:a}),Object(u.jsx)(d.a,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}var V=a(21),X=a.n(V);o.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(U,{className:X.a.App})}),document.querySelector("#root"))},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2E0ct",Idle:"ImageGallery_Idle__1cdk5"}}},[[50,1,2]]]);
//# sourceMappingURL=main.64b4c967.chunk.js.map